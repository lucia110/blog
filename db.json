{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/Anisina/source/css/blog-style.css","path":"css/blog-style.css","modified":1,"renderable":1},{"_id":"themes/Anisina/source/css/syntax.styl","path":"css/syntax.styl","modified":1,"renderable":1},{"_id":"themes/Anisina/source/css/bootstrap.min.css","path":"css/bootstrap.min.css","modified":1,"renderable":1},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.eot","path":"fonts/glyphicons-halflings-regular.eot","modified":1,"renderable":1},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.svg","path":"fonts/glyphicons-halflings-regular.svg","modified":1,"renderable":1},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.woff","path":"fonts/glyphicons-halflings-regular.woff","modified":1,"renderable":1},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.ttf","path":"fonts/glyphicons-halflings-regular.ttf","modified":1,"renderable":1},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.woff2","path":"fonts/glyphicons-halflings-regular.woff2","modified":1,"renderable":1},{"_id":"themes/Anisina/source/js/blog.js","path":"js/blog.js","modified":1,"renderable":1},{"_id":"themes/Anisina/source/js/bootstrap.min.js","path":"js/bootstrap.min.js","modified":1,"renderable":1},{"_id":"themes/Anisina/source/js/jquery.js","path":"js/jquery.js","modified":1,"renderable":1},{"_id":"themes/Anisina/source/js/jquery.min.js","path":"js/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/Anisina/source/js/jquery.tagcloud.js","path":"js/jquery.tagcloud.js","modified":1,"renderable":1},{"_id":"themes/Anisina/source/js/totop.js","path":"js/totop.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1611927758263},{"_id":"source/_posts/number-exchange.md","hash":"59a72df6deb074073cff597e4d6f7cf5906aa977","modified":1616124643155},{"_id":"themes/Anisina/_config.yml","hash":"5baf18c53f7635cd35aa5a8dab8abc08251023ce","modified":1612092312840},{"_id":"themes/Anisina/.gitignore","hash":"7a2d5c9a8f18e75645eabbeacbf0ee83ba15e854","modified":1612092312827},{"_id":"themes/Anisina/README.md","hash":"670e2bf1a4df28e170a5cff18705fed44efff614","modified":1612092312828},{"_id":"themes/Anisina/LICENSE","hash":"2b209f06bebeb2a8c2b7e187e436f3e1e1fbc8a7","modified":1612092312828},{"_id":"themes/Anisina/.github/FUNDING.yml","hash":"dd672081ec4678929f6c1ac3ebbef4d990291ecd","modified":1612092312827},{"_id":"themes/Anisina/package.json","hash":"12541fbf56f785e4f5d486a55b4939f3033f625b","modified":1612092312844},{"_id":"themes/Anisina/Screenshots/mobile-index.jpeg","hash":"cd75f77f5d865d42182e2233e354eeba9f114d98","modified":1612092312829},{"_id":"themes/Anisina/languages_to_be_added/de.yml","hash":"424a9c1e6ab69334d7873f6574da02ca960aa572","modified":1612092312841},{"_id":"themes/Anisina/languages_to_be_added/default.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1612092312841},{"_id":"themes/Anisina/languages_to_be_added/no.yml","hash":"8ca475a3b4f8efe6603030f0013aae39668230e1","modified":1612092312841},{"_id":"themes/Anisina/languages_to_be_added/en.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1612092312841},{"_id":"themes/Anisina/languages_to_be_added/es.yml","hash":"cb4eeca0ed3768a77e0cd216300f2b2549628b1b","modified":1612092312841},{"_id":"themes/Anisina/languages_to_be_added/pl.yml","hash":"de7eb5850ae65ba7638e907c805fea90617a988c","modified":1612092312841},{"_id":"themes/Anisina/layout/.DS_Store","hash":"fd623c7cbe0d8fd902f6ca242127fd8db7da6c18","modified":1612092312842},{"_id":"themes/Anisina/layout/404.ejs","hash":"1fe05722bd1b32bbe0ae4e3e880866f935e0ae11","modified":1612092312842},{"_id":"themes/Anisina/layout/layout.ejs","hash":"b728827bf3ec55baf96a882032397e6c74c65f34","modified":1612092312843},{"_id":"themes/Anisina/layout/index.ejs","hash":"a0eaee13571e79c3632e23a9e94ccc991761d1f5","modified":1612092312843},{"_id":"themes/Anisina/languages_to_be_added/zh-CN.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1612092312841},{"_id":"themes/Anisina/languages_to_be_added/ru.yml","hash":"42df7afeb7a35dc46d272b7f4fb880a9d9ebcaa5","modified":1612092312841},{"_id":"themes/Anisina/layout/categories.ejs","hash":"055ac64a3ba036e29ff984fd886d57d580bbbff6","modified":1612092312843},{"_id":"themes/Anisina/layout/poetry.ejs","hash":"6c955d419050825e13d39c780d45aceafbf6552d","modified":1612092312843},{"_id":"themes/Anisina/layout/page.ejs","hash":"e9990327469aa94a98a3dae92bdc9326a5b99c8a","modified":1612092312843},{"_id":"themes/Anisina/layout/post.ejs","hash":"05203c1f8414ffc237a00be77a156264df2c7971","modified":1612092312843},{"_id":"themes/Anisina/layout/tags.ejs","hash":"a5b73e70540e12532aa92f12609b3a937a8bc28b","modified":1612092312844},{"_id":"themes/Anisina/layout/_partial/head.ejs","hash":"4e0d96cac503d4e3a5b254d8b8175c392971ce38","modified":1612092312842},{"_id":"themes/Anisina/layout/works.ejs","hash":"1df954e54098cc4845295836374abed870789dcd","modified":1612092312844},{"_id":"themes/Anisina/layout/_partial/footer.ejs","hash":"57a3ad1dc43a47a4558eb69872441d870b174238","modified":1612092312842},{"_id":"themes/Anisina/layout/_partial/nav.ejs","hash":"3baa41d595e951efa1db34dd1789c6f8d3b094da","modified":1612092312842},{"_id":"themes/Anisina/layout/_partial/pagination.ejs","hash":"557d6bb069a1d48af49ae912994653f44b32a570","modified":1612092312843},{"_id":"themes/Anisina/source/css/syntax.styl","hash":"f3f9ff0d1ebc4f7fa18d7e367b2ba2f0899adbd4","modified":1612092312845},{"_id":"themes/Anisina/source/css/blog-style.css","hash":"c6830e31138e412c2aa05228c4cd6035063fe651","modified":1612092312844},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1612092312845},{"_id":"themes/Anisina/languages_to_be_added/zh-TW.yml","hash":"9acac6cc4f8002c3fa53ff69fb8cf66c915bd016","modified":1612092312841},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1612092312846},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1612092312846},{"_id":"themes/Anisina/source/js/blog.js","hash":"0f805c744ef8a48c0abdd9d204cfc19ee6cafc14","modified":1612092312847},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1612092312846},{"_id":"themes/Anisina/source/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1612092312848},{"_id":"themes/Anisina/source/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1612092312850},{"_id":"themes/Anisina/source/js/totop.js","hash":"11ede60fccb7c763d6973f80efc78b47c0843746","modified":1612092312850},{"_id":"themes/Anisina/source/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1612092312846},{"_id":"themes/Anisina/source/css/bootstrap.min.css","hash":"c5db932e115ff97af7b4512b947cde3ba2964db8","modified":1612092312845},{"_id":"themes/Anisina/source/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1612092312850},{"_id":"themes/Anisina/Screenshots/Anisina.png","hash":"146dd991f55a827a514259e20a51de1e9b07a13d","modified":1612092312829},{"_id":"themes/Anisina/Screenshots/poetry-show.png","hash":"f5fdcd25026a87a0aafeebb1f19cdb3c0a81a666","modified":1612092312840},{"_id":"themes/Anisina/source/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1612092312849},{"_id":"themes/Anisina/Screenshots/mobile-post.jpeg","hash":"2081cdff23a9a8c185a48d9aabcc9dc8e77833ec","modified":1612092312831},{"_id":"themes/Anisina/Screenshots/pc-index.png","hash":"b04094dac75cb656b4244c1dfaf246168a0f8926","modified":1612092312834},{"_id":"themes/Anisina/Screenshots/pc-post.png","hash":"cde56c0797b6ff8dd555fb1f8c3f9b21bceaa3be","modified":1612092312838},{"_id":"public/2021/03/12/number-exchange/index.html","hash":"8fcda23ada9eef63fe0eab814b849c0813b4befc","modified":1617193089343},{"_id":"public/2021/01/29/hello-world/index.html","hash":"9638793a4be7bd0894fcfbe80232bc669fd80cdc","modified":1617193089343},{"_id":"public/archives/index.html","hash":"13b7eac514954aea129508db465e94e16d5b5ebb","modified":1617193089343},{"_id":"public/archives/2021/index.html","hash":"896d00a2f5aaf99ce03c3cc5f67d9ccff45b844d","modified":1617193089343},{"_id":"public/archives/2021/01/index.html","hash":"02d3d6e83642183cd4120b3d1ce229b0520b72b8","modified":1617193089343},{"_id":"public/archives/2021/03/index.html","hash":"a4cfe304e2e650f7f412dbe8b73a36ad850d05cc","modified":1617193089343},{"_id":"public/index.html","hash":"bcbf0805f10945db2456136ae42a0d78ae272c15","modified":1617193089343},{"_id":"public/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1617193089343},{"_id":"public/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1617193089343},{"_id":"public/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1617193089343},{"_id":"public/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1617193089343},{"_id":"public/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1617193089343},{"_id":"public/css/syntax.css","hash":"4616879fec214c9cc4f5835615348f0bbeabf2a9","modified":1617193089343},{"_id":"public/js/blog.js","hash":"0f805c744ef8a48c0abdd9d204cfc19ee6cafc14","modified":1617193089343},{"_id":"public/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1617193089343},{"_id":"public/js/totop.js","hash":"11ede60fccb7c763d6973f80efc78b47c0843746","modified":1617193089343},{"_id":"public/css/blog-style.css","hash":"c6830e31138e412c2aa05228c4cd6035063fe651","modified":1617193089343},{"_id":"public/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1617193089343},{"_id":"public/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1617193089343},{"_id":"public/css/bootstrap.min.css","hash":"c5db932e115ff97af7b4512b947cde3ba2964db8","modified":1617193089343},{"_id":"public/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1617193089343}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2021-01-29T13:42:38.263Z","updated":"2021-01-29T13:42:38.263Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckmxf0e100000q4v46bugfvtp","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"number-exchange","date":"2021-03-12T02:53:35.000Z","_content":"\n### 参考文章： https://currency.js.org/\n### https://github.com/MikeMcl/decimal.js\n### https://juejin.cn/post/6844903951876227080#heading-9\n### https://cloud.tencent.com/developer/article/1477816\n\nQ: \n0.1 + 0.3 = ？\n0.1 + 0.2 = ？\n\n浮点数的存储方式： 64位 \n1 符号位S \n11 指数位E （补码表示）\n52 尾数M\n插入图片\n\n科学计数法的二进制表示\n// 乘二取整，进位取零，逆序排列\n举例：0.5 用二进制表示 0.1，0.25用哪个二进制表示 0.01\n0.25 * 2 = 0.5\n0.5 * 2 = 1\n\nJS计算：9007199254740993 - 990 // 9007199254740002\n为什么 0.1+0.2=0.30000000000000004？\n计算步骤为：\n\n// 0.1 和 0.2 都转化成二进制后再进行运算\n0.1 * 2 = 0.2\n0.2 * 2 = 0.4\n0.4 * 2 = 0.8\n0.8 * 2 = 1.6\n0.6 * 2 = 1.2\n0.2 * 2 = 0.4\n0.4 * 2 = 0.8\n0.8 * 2 = 1.6\n0.6 * 2 = 1.2\n\n0.00011001100110011001100110011001100110011001100110011010 +\n0.0011001100110011001100110011001100110011001100110011010 =\n0.0100110011001100110011001100110011001100110011001100111\n= 1 * (1/2)(-2) + 1 * (1/2)(-5) + 1 * (1/2)(-6)  +  1 * (1/2)(-2)  \n\n// 转成十进制正好是 0.30000000000000004\n\n// Number.EPSILON 可以用来设置“能够接受的误差范围”\nNumber.EPSILON // 2.220446049250313e-16\nNumber.EPSILON === Math.pow(2,-52) // true\nES6 在Number对象上面，新增一个极小的常量Number.EPSILON。根据规格，它表示 1 与大于 1 的最小浮点数之间的差。\n\n对于 64 位浮点数来说，大于 1 的最小浮点数相当于二进制的1.00..001，小数点后面有连续 51 个零。这个值减去 1 之后，就等于 2 的 -52 次方。\n\n\n\nJavaScript 里最大的安全的整数为什么是2的53次方减一？\nJavaScript 能够准确表示的整数范围在-2^53到2^53之间（不含两个端点），超过这个范围，无法精确表示这个值\n\nJavascript的Number数字类型\n64-bit的浮点数\n\n// 最大安全数\nNumber.MAX_SAFE_INTEGER = Math.pow(2,53) - 1\n// 最小安全数\nNumber.MIN_SAFE_INTEGER  = Math.pow(2,53) +1\n// 判断安全数\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false\n\n// 如何解决误差\n大数字计算转字符串处理\n小数字计算呢？\n\ntoPrecision vs toFixed\n数据处理时，这两个函数很容易混淆。它们的共同点是把数字转成字符串供展示使用。注意在计算的中间过程不要使用，只用于最终结果。\n\n不同点就需要注意一下：\n\ntoPrecision 是处理精度，精度是从左至右第一个不为0的数开始数起。\ntoFixed 是小数点后指定位数取整，从小数点开始数起。\n\n0.0121012312.toFixed(); // \"0\"\n0.0121012312.toPrecision() // \"0.0121012312\"\n\n1.25.toFixed(1) // 1.4 正确\n1.335.toFixed(2) // 1.33  错误\n1.3335.toFixed(3) // 1.333 错误\n1.33335.toFixed(4) // 1.3334 正确\n1.333335.toFixed(5)  // 1.33333 错误\n1.3333335.toFixed(6) // 1.333333 错误\n\n重写\nNumber.prototype.toFixed = function(len) {\n\n}\n\n四舍五入，保留两位小数\n0.00003 -》 0.01\n59.994 -》 59.99\n59.995 -》 60.00\n59.996 -》 60.00\n\n","source":"_posts/number-exchange.md","raw":"---\ntitle: number-exchange\ndate: 2021-03-12 10:53:35\ntags:\n---\n\n### 参考文章： https://currency.js.org/\n### https://github.com/MikeMcl/decimal.js\n### https://juejin.cn/post/6844903951876227080#heading-9\n### https://cloud.tencent.com/developer/article/1477816\n\nQ: \n0.1 + 0.3 = ？\n0.1 + 0.2 = ？\n\n浮点数的存储方式： 64位 \n1 符号位S \n11 指数位E （补码表示）\n52 尾数M\n插入图片\n\n科学计数法的二进制表示\n// 乘二取整，进位取零，逆序排列\n举例：0.5 用二进制表示 0.1，0.25用哪个二进制表示 0.01\n0.25 * 2 = 0.5\n0.5 * 2 = 1\n\nJS计算：9007199254740993 - 990 // 9007199254740002\n为什么 0.1+0.2=0.30000000000000004？\n计算步骤为：\n\n// 0.1 和 0.2 都转化成二进制后再进行运算\n0.1 * 2 = 0.2\n0.2 * 2 = 0.4\n0.4 * 2 = 0.8\n0.8 * 2 = 1.6\n0.6 * 2 = 1.2\n0.2 * 2 = 0.4\n0.4 * 2 = 0.8\n0.8 * 2 = 1.6\n0.6 * 2 = 1.2\n\n0.00011001100110011001100110011001100110011001100110011010 +\n0.0011001100110011001100110011001100110011001100110011010 =\n0.0100110011001100110011001100110011001100110011001100111\n= 1 * (1/2)(-2) + 1 * (1/2)(-5) + 1 * (1/2)(-6)  +  1 * (1/2)(-2)  \n\n// 转成十进制正好是 0.30000000000000004\n\n// Number.EPSILON 可以用来设置“能够接受的误差范围”\nNumber.EPSILON // 2.220446049250313e-16\nNumber.EPSILON === Math.pow(2,-52) // true\nES6 在Number对象上面，新增一个极小的常量Number.EPSILON。根据规格，它表示 1 与大于 1 的最小浮点数之间的差。\n\n对于 64 位浮点数来说，大于 1 的最小浮点数相当于二进制的1.00..001，小数点后面有连续 51 个零。这个值减去 1 之后，就等于 2 的 -52 次方。\n\n\n\nJavaScript 里最大的安全的整数为什么是2的53次方减一？\nJavaScript 能够准确表示的整数范围在-2^53到2^53之间（不含两个端点），超过这个范围，无法精确表示这个值\n\nJavascript的Number数字类型\n64-bit的浮点数\n\n// 最大安全数\nNumber.MAX_SAFE_INTEGER = Math.pow(2,53) - 1\n// 最小安全数\nNumber.MIN_SAFE_INTEGER  = Math.pow(2,53) +1\n// 判断安全数\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false\nNumber.isSafeInteger(Number.MIN_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER) // true\nNumber.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false\n\n// 如何解决误差\n大数字计算转字符串处理\n小数字计算呢？\n\ntoPrecision vs toFixed\n数据处理时，这两个函数很容易混淆。它们的共同点是把数字转成字符串供展示使用。注意在计算的中间过程不要使用，只用于最终结果。\n\n不同点就需要注意一下：\n\ntoPrecision 是处理精度，精度是从左至右第一个不为0的数开始数起。\ntoFixed 是小数点后指定位数取整，从小数点开始数起。\n\n0.0121012312.toFixed(); // \"0\"\n0.0121012312.toPrecision() // \"0.0121012312\"\n\n1.25.toFixed(1) // 1.4 正确\n1.335.toFixed(2) // 1.33  错误\n1.3335.toFixed(3) // 1.333 错误\n1.33335.toFixed(4) // 1.3334 正确\n1.333335.toFixed(5)  // 1.33333 错误\n1.3333335.toFixed(6) // 1.333333 错误\n\n重写\nNumber.prototype.toFixed = function(len) {\n\n}\n\n四舍五入，保留两位小数\n0.00003 -》 0.01\n59.994 -》 59.99\n59.995 -》 60.00\n59.996 -》 60.00\n\n","slug":"number-exchange","published":1,"updated":"2021-03-19T03:30:43.155Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckmxf0e140001q4v44bl88d5r","content":"<h3 id=\"参考文章：-https-currency-js-org\"><a href=\"#参考文章：-https-currency-js-org\" class=\"headerlink\" title=\"参考文章： https://currency.js.org/\"></a>参考文章： <a href=\"https://currency.js.org/\">https://currency.js.org/</a></h3><h3 id=\"https-github-com-MikeMcl-decimal-js\"><a href=\"#https-github-com-MikeMcl-decimal-js\" class=\"headerlink\" title=\"https://github.com/MikeMcl/decimal.js\"></a><a href=\"https://github.com/MikeMcl/decimal.js\">https://github.com/MikeMcl/decimal.js</a></h3><h3 id=\"https-juejin-cn-post-6844903951876227080-heading-9\"><a href=\"#https-juejin-cn-post-6844903951876227080-heading-9\" class=\"headerlink\" title=\"https://juejin.cn/post/6844903951876227080#heading-9\"></a><a href=\"https://juejin.cn/post/6844903951876227080#heading-9\">https://juejin.cn/post/6844903951876227080#heading-9</a></h3><h3 id=\"https-cloud-tencent-com-developer-article-1477816\"><a href=\"#https-cloud-tencent-com-developer-article-1477816\" class=\"headerlink\" title=\"https://cloud.tencent.com/developer/article/1477816\"></a><a href=\"https://cloud.tencent.com/developer/article/1477816\">https://cloud.tencent.com/developer/article/1477816</a></h3><p>Q:<br>0.1 + 0.3 = ？<br>0.1 + 0.2 = ？</p>\n<p>浮点数的存储方式： 64位<br>1 符号位S<br>11 指数位E （补码表示）<br>52 尾数M<br>插入图片</p>\n<p>科学计数法的二进制表示<br>// 乘二取整，进位取零，逆序排列<br>举例：0.5 用二进制表示 0.1，0.25用哪个二进制表示 0.01<br>0.25 * 2 = 0.5<br>0.5 * 2 = 1</p>\n<p>JS计算：9007199254740993 - 990 // 9007199254740002<br>为什么 0.1+0.2=0.30000000000000004？<br>计算步骤为：</p>\n<p>// 0.1 和 0.2 都转化成二进制后再进行运算<br>0.1 * 2 = 0.2<br>0.2 * 2 = 0.4<br>0.4 * 2 = 0.8<br>0.8 * 2 = 1.6<br>0.6 * 2 = 1.2<br>0.2 * 2 = 0.4<br>0.4 * 2 = 0.8<br>0.8 * 2 = 1.6<br>0.6 * 2 = 1.2</p>\n<p>0.00011001100110011001100110011001100110011001100110011010 +<br>0.0011001100110011001100110011001100110011001100110011010 =<br>0.0100110011001100110011001100110011001100110011001100111<br>= 1 * (1/2)(-2) + 1 * (1/2)(-5) + 1 * (1/2)(-6)  +  1 * (1/2)(-2)  </p>\n<p>// 转成十进制正好是 0.30000000000000004</p>\n<p>// Number.EPSILON 可以用来设置“能够接受的误差范围”<br>Number.EPSILON // 2.220446049250313e-16<br>Number.EPSILON === Math.pow(2,-52) // true<br>ES6 在Number对象上面，新增一个极小的常量Number.EPSILON。根据规格，它表示 1 与大于 1 的最小浮点数之间的差。</p>\n<p>对于 64 位浮点数来说，大于 1 的最小浮点数相当于二进制的1.00..001，小数点后面有连续 51 个零。这个值减去 1 之后，就等于 2 的 -52 次方。</p>\n<p>JavaScript 里最大的安全的整数为什么是2的53次方减一？<br>JavaScript 能够准确表示的整数范围在-2^53到2^53之间（不含两个端点），超过这个范围，无法精确表示这个值</p>\n<p>Javascript的Number数字类型<br>64-bit的浮点数</p>\n<p>// 最大安全数<br>Number.MAX_SAFE_INTEGER = Math.pow(2,53) - 1<br>// 最小安全数<br>Number.MIN_SAFE_INTEGER  = Math.pow(2,53) +1<br>// 判断安全数<br>Number.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false<br>Number.isSafeInteger(Number.MIN_SAFE_INTEGER) // true<br>Number.isSafeInteger(Number.MAX_SAFE_INTEGER) // true<br>Number.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false</p>\n<p>// 如何解决误差<br>大数字计算转字符串处理<br>小数字计算呢？</p>\n<p>toPrecision vs toFixed<br>数据处理时，这两个函数很容易混淆。它们的共同点是把数字转成字符串供展示使用。注意在计算的中间过程不要使用，只用于最终结果。</p>\n<p>不同点就需要注意一下：</p>\n<p>toPrecision 是处理精度，精度是从左至右第一个不为0的数开始数起。<br>toFixed 是小数点后指定位数取整，从小数点开始数起。</p>\n<p>0.0121012312.toFixed(); // “0”<br>0.0121012312.toPrecision() // “0.0121012312”</p>\n<p>1.25.toFixed(1) // 1.4 正确<br>1.335.toFixed(2) // 1.33  错误<br>1.3335.toFixed(3) // 1.333 错误<br>1.33335.toFixed(4) // 1.3334 正确<br>1.333335.toFixed(5)  // 1.33333 错误<br>1.3333335.toFixed(6) // 1.333333 错误</p>\n<p>重写<br>Number.prototype.toFixed = function(len) {</p>\n<p>}</p>\n<p>四舍五入，保留两位小数<br>0.00003 -》 0.01<br>59.994 -》 59.99<br>59.995 -》 60.00<br>59.996 -》 60.00</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"参考文章：-https-currency-js-org\"><a href=\"#参考文章：-https-currency-js-org\" class=\"headerlink\" title=\"参考文章： https://currency.js.org/\"></a>参考文章： <a href=\"https://currency.js.org/\">https://currency.js.org/</a></h3><h3 id=\"https-github-com-MikeMcl-decimal-js\"><a href=\"#https-github-com-MikeMcl-decimal-js\" class=\"headerlink\" title=\"https://github.com/MikeMcl/decimal.js\"></a><a href=\"https://github.com/MikeMcl/decimal.js\">https://github.com/MikeMcl/decimal.js</a></h3><h3 id=\"https-juejin-cn-post-6844903951876227080-heading-9\"><a href=\"#https-juejin-cn-post-6844903951876227080-heading-9\" class=\"headerlink\" title=\"https://juejin.cn/post/6844903951876227080#heading-9\"></a><a href=\"https://juejin.cn/post/6844903951876227080#heading-9\">https://juejin.cn/post/6844903951876227080#heading-9</a></h3><h3 id=\"https-cloud-tencent-com-developer-article-1477816\"><a href=\"#https-cloud-tencent-com-developer-article-1477816\" class=\"headerlink\" title=\"https://cloud.tencent.com/developer/article/1477816\"></a><a href=\"https://cloud.tencent.com/developer/article/1477816\">https://cloud.tencent.com/developer/article/1477816</a></h3><p>Q:<br>0.1 + 0.3 = ？<br>0.1 + 0.2 = ？</p>\n<p>浮点数的存储方式： 64位<br>1 符号位S<br>11 指数位E （补码表示）<br>52 尾数M<br>插入图片</p>\n<p>科学计数法的二进制表示<br>// 乘二取整，进位取零，逆序排列<br>举例：0.5 用二进制表示 0.1，0.25用哪个二进制表示 0.01<br>0.25 * 2 = 0.5<br>0.5 * 2 = 1</p>\n<p>JS计算：9007199254740993 - 990 // 9007199254740002<br>为什么 0.1+0.2=0.30000000000000004？<br>计算步骤为：</p>\n<p>// 0.1 和 0.2 都转化成二进制后再进行运算<br>0.1 * 2 = 0.2<br>0.2 * 2 = 0.4<br>0.4 * 2 = 0.8<br>0.8 * 2 = 1.6<br>0.6 * 2 = 1.2<br>0.2 * 2 = 0.4<br>0.4 * 2 = 0.8<br>0.8 * 2 = 1.6<br>0.6 * 2 = 1.2</p>\n<p>0.00011001100110011001100110011001100110011001100110011010 +<br>0.0011001100110011001100110011001100110011001100110011010 =<br>0.0100110011001100110011001100110011001100110011001100111<br>= 1 * (1/2)(-2) + 1 * (1/2)(-5) + 1 * (1/2)(-6)  +  1 * (1/2)(-2)  </p>\n<p>// 转成十进制正好是 0.30000000000000004</p>\n<p>// Number.EPSILON 可以用来设置“能够接受的误差范围”<br>Number.EPSILON // 2.220446049250313e-16<br>Number.EPSILON === Math.pow(2,-52) // true<br>ES6 在Number对象上面，新增一个极小的常量Number.EPSILON。根据规格，它表示 1 与大于 1 的最小浮点数之间的差。</p>\n<p>对于 64 位浮点数来说，大于 1 的最小浮点数相当于二进制的1.00..001，小数点后面有连续 51 个零。这个值减去 1 之后，就等于 2 的 -52 次方。</p>\n<p>JavaScript 里最大的安全的整数为什么是2的53次方减一？<br>JavaScript 能够准确表示的整数范围在-2^53到2^53之间（不含两个端点），超过这个范围，无法精确表示这个值</p>\n<p>Javascript的Number数字类型<br>64-bit的浮点数</p>\n<p>// 最大安全数<br>Number.MAX_SAFE_INTEGER = Math.pow(2,53) - 1<br>// 最小安全数<br>Number.MIN_SAFE_INTEGER  = Math.pow(2,53) +1<br>// 判断安全数<br>Number.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false<br>Number.isSafeInteger(Number.MIN_SAFE_INTEGER) // true<br>Number.isSafeInteger(Number.MAX_SAFE_INTEGER) // true<br>Number.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false</p>\n<p>// 如何解决误差<br>大数字计算转字符串处理<br>小数字计算呢？</p>\n<p>toPrecision vs toFixed<br>数据处理时，这两个函数很容易混淆。它们的共同点是把数字转成字符串供展示使用。注意在计算的中间过程不要使用，只用于最终结果。</p>\n<p>不同点就需要注意一下：</p>\n<p>toPrecision 是处理精度，精度是从左至右第一个不为0的数开始数起。<br>toFixed 是小数点后指定位数取整，从小数点开始数起。</p>\n<p>0.0121012312.toFixed(); // “0”<br>0.0121012312.toPrecision() // “0.0121012312”</p>\n<p>1.25.toFixed(1) // 1.4 正确<br>1.335.toFixed(2) // 1.33  错误<br>1.3335.toFixed(3) // 1.333 错误<br>1.33335.toFixed(4) // 1.3334 正确<br>1.333335.toFixed(5)  // 1.33333 错误<br>1.3333335.toFixed(6) // 1.333333 错误</p>\n<p>重写<br>Number.prototype.toFixed = function(len) {</p>\n<p>}</p>\n<p>四舍五入，保留两位小数<br>0.00003 -》 0.01<br>59.994 -》 59.99<br>59.995 -》 60.00<br>59.996 -》 60.00</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}